<ons-page id="pokemon">

	<style>
		.after-list {
      margin: 20px;
      text-align: center;
    }
	</style>

  <script>
    document.addEventListener('init', ({ target }) => {
      if (target.matches('#pokemon')) {
        let url = 'https://pokeapi.co/api/v2/pokemon';

        const list = document.querySelector('#listo');

        const createItem = (e) => ons.createElement(`<ons-list-item>${e.name}</ons-list-item>`);

        const get = async () => {
          const response = await fetch(url);
          const json = await response.json();
          json.results.forEach(e => list.appendChild(createItem(e)));
          url = json.next;
        };

        get();

        target.onInfiniteScroll = (done) => {
          setTimeout(() => {
            get();
            done();
          }, 0);
        };
      }
    });
  </script>

  <div class="content">

    <ons-list id="listo"></ons-list>

   	<div class="after-list">
	    <ons-icon icon="fa-spinner" size="26px" spin></ons-icon>
    </div>

  </div>
</ons-page>
